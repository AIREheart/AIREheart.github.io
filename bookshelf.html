---
layout: default
title: Bookshelf
permalink: /bookshelf/
---

<!-- Specific CSS for the bookshelf components -->
<style>
    .bookshelf-container {
        background-color: #634221; /* Light brown for bookshelf base */
        border-radius: 1rem;
        padding: 2rem;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        max-width: 1200px;
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 2.5rem; /* Space between shelves */
    }

    .shelf {
        display: flex;
        flex-wrap: wrap;
        justify-content: center; /* Center books on the shelf */
        gap: 2rem; /* Space between books */
        padding: 1rem 0;
        position: relative;
        z-index: 1; /* Ensure books are above shelf details */
    }

    .shelf::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1rem; /* Thickness of the wooden shelf */
        background-color: #7b5842; /* Lighter brown for shelf surface */
        border-radius: 0 0 0.5rem 0.5rem;
        box-shadow: inset 0 -2px 5px rgba(0, 0, 0, 0.2);
        z-index: 0; /* Behind the books */
    }

    .book-item {
        position: relative;
        width: 120px; /* Standard book width */
        height: 180px; /* Standard book height */
        perspective: 1000px; /* For 3D transform */
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        transform-style: preserve-3d;
        border-radius: 0.25rem; /* Small rounded corners for books */
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* Initial shadow */
    }

    .book-item:hover {
        transform: translateY(-10px) rotateY(5deg) scale(1.05); /* Lift and slight tilt on hover */
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4); /* Stronger shadow on hover */
        z-index: 10; /* Bring hovered book to front */
    }

    .book-cover {
        width: 100%;
        height: 100%;
        background-color: #ddd; /* Placeholder background */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        text-align: center;
        color: #555;
        border-radius: 0.25rem;
        overflow: hidden; /* Hide overflow from image */
        transition: transform 0.3s ease;
        transform-origin: bottom center; /* Pivot point for 3D effect */
        backface-visibility: hidden; /* Hide back of the cover when flipped */
    }

    .book-cover img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Ensure cover image fills the space */
        border-radius: 0.25rem;
    }

    .book-review {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.85); /* Dark overlay for review */
        color: #fff;
        padding: 1rem;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-size: 0.8rem;
        line-height: 1.3;
        opacity: 0; /* Initially hidden */
        transform: rotateY(-180deg); /* Start flipped */
        transition: opacity 0.3s ease, transform 0.3s ease;
        border-radius: 0.25rem;
        backface-visibility: hidden; /* Hide back of the review when not flipped */
    }

    .book-item:hover .book-cover {
        transform: rotateY(180deg); /* Flip cover on hover */
    }

    .book-item:hover .book-review {
        opacity: 1; /* Show review on hover */
        transform: rotateY(0deg); /* Flip review to front */
    }

    /* Loading spinner styles */
    .loader {
        border: 4px solid #f3f3f3; /* Light grey */
        border-top: 4px solid #3498db; /* Blue */
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
        margin-top: 50px;
        display: none; /* Hidden by default */
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }


    /* Responsive adjustments */
    @media (max-width: 768px) {
        .bookshelf-container {
            padding: 1rem;
        }
        .shelf {
            gap: 1.5rem;
        }
        .book-item {
            width: 100px;
            height: 150px;
        }
        .book-review {
            font-size: 0.7rem;
            padding: 0.8rem;
        }
    }

    @media (max-width: 480px) {
        .bookshelf-container {
            padding: 0.5rem;
        }
        .shelf {
            gap: 1rem;
        }
        .book-item {
            width: 80px;
            height: 120px;
        }
        .book-review {
            font-size: 0.6rem;
            padding: 0.5rem;
        }
    }
</style>

<h1 class="text-4xl font-bold text-gray-800 mb-8 rounded-lg bg-white p-4 shadow-lg">My Digital Library ðŸ“š</h1>

<div id="loading-spinner" class="loader"></div>
<div id="bookshelf" class="bookshelf-container">
    <!-- Bookshelves will be populated here by JavaScript -->
</div>

<script>
    const bookshelf = document.getElementById('bookshelf');
    const loadingSpinner = document.getElementById('loading-spinner');
    const booksPerShelf = 5; // Adjust how many books appear on each shelf

    // Define a fallback dataset in case fetching from books.json fails
    const defaultBooksData = [
        {
            title: "The Hitchhiker's Guide to the Galaxy",
            author: "Douglas Adams",
            cover: "https://placehold.co/120x180/7e3a6c/ffffff?text=Hitchhiker's", // Placeholder image
            review: "A hilariously absurd and insightful journey through space. Required reading for anyone who loves clever satire and existential ponderings."
        },
        {
            title: "Dune",
            author: "Frank Herbert",
            cover: "https://placehold.co/120x180/2a4b5e/ffffff?text=Dune", // Placeholder image
            review: "An epic science fiction masterpiece with intricate world-building, political intrigue, and ecological themes. Truly immersive."
        },
        {
            title: "1984",
            author: "George Orwell",
            cover: "https://placehold.co/120x180/1a1a1a/ffffff?text=1984", // Placeholder image
            review: "A chilling dystopian classic that remains incredibly relevant today, exploring themes of surveillance, truth, and rebellion."
        },
        {
            title: "Pride and Prejudice",
            author: "Jane Austen",
            cover: "https://placehold.co/120x180/a0c49d/333333?text=Pride+Prejudice", // Placeholder image
            review: "A timeless romance brimming with wit, social commentary, and unforgettable characters. A delightful read."
        },
        {
            title: "The Great Gatsby",
            author: "F. Scott Fitzgerald",
            cover: "https://placehold.co/120x180/7a7a7a/ffffff?text=Gatsby", // Placeholder image
            review: "A poignant tale of the American Dream, lost love, and the Jazz Age, beautifully written and deeply symbolic."
        },
        {
            title: "To Kill a Mockingbird",
            author: "Harper Lee",
            cover: "https://placehold.co/120x180/6c7a89/ffffff?text=Mockingbird", // Placeholder image
            review: "A powerful and enduring story about justice, prejudice, and growing up in the American South. A true classic."
        },
        {
            title: "Sapiens: A Brief History of Humankind",
            author: "Yuval Noah Harari",
            cover: "https://placehold.co/120x180/e6b22c/000000?text=Sapiens", // Placeholder image
            review: "A thought-provoking and ambitious overview of human history, challenging assumptions and offering fresh perspectives."
        },
        {
            title: "The Lord of the Rings",
            author: "J.R.R. Tolkien",
            cover: "https://placehold.co/120x180/4f5b5b/ffffff?text=LOTR", // Placeholder image
            review: "The quintessential fantasy epic. A rich, immersive world with unforgettable characters and a timeless battle between good and evil."
        },
        {
            title: "Project Hail Mary",
            author: "Andy Weir",
            cover: "https://placehold.co/120x180/3f88c5/ffffff?text=Hail+Mary", // Placeholder image
            review: "A brilliant, funny, and scientifically accurate sci-fi adventure. Couldn't put it down!"
        },
        {
            title: "Circe",
            author: "Madeline Miller",
            cover: "https://placehold.co/120x180/d36582/ffffff?text=Circe", // Placeholder image
            review: "A captivating retelling of the Greek myth from Circe's perspective. Beautiful prose and a deeply empathetic character study."
        }
        // Add more books here
    ];

    /**
     * Creates and appends book items to the bookshelf.
     * @param {Array<Object>} booksData - An array of book objects.
     */
    function createBookshelf(booksData) {
        bookshelf.innerHTML = ''; // Clear existing books
        let shelfDiv;
        booksData.forEach((book, index) => {
            // Create a new shelf for every 'booksPerShelf' books
            if (index % booksPerShelf === 0) {
                shelfDiv = document.createElement('div');
                shelfDiv.classList.add('shelf');
                bookshelf.appendChild(shelfDiv);
            }

            const bookItem = document.createElement('div');
            bookItem.classList.add('book-item');

            const bookCover = document.createElement('div');
            bookCover.classList.add('book-cover');
            const coverImg = document.createElement('img');
            coverImg.src = book.cover;
            coverImg.alt = book.title + " Cover";
            // Fallback for broken images: uses a placeholder if the image fails to load
            coverImg.onerror = function() {
                this.src = `https://placehold.co/120x180/666/ffffff?text=Cover+Not+Found`;
            };
            bookCover.appendChild(coverImg);

            const bookReview = document.createElement('div');
            bookReview.classList.add('book-review');
            bookReview.innerHTML = `
                <h3 class="font-bold text-lg mb-1">${book.title}</h3>
                <p class="italic text-sm mb-2">- ${book.author}</p>
                <p class="text-xs">${book.review}</p>
            `;

            bookItem.appendChild(bookCover);
            bookItem.appendChild(bookReview);
            shelfDiv.appendChild(bookItem);
        });
    }

    /**
     * Fetches book data from a JSON file and then creates the bookshelf.
     * Includes basic error handling and a loading spinner, with a fallback to default data.
     */
    async function fetchBooksData() {
        loadingSpinner.style.display = 'block'; // Show spinner
        bookshelf.style.display = 'none'; // Hide bookshelf during loading

        try {
            // Use Jekyll's site.baseurl to ensure the path to books.json is correct
            // This is crucial for GitHub Pages deployments in subdirectories.
            const response = await fetch('{{ site.baseurl }}/books.json');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const booksData = await response.json();
            createBookshelf(booksData);
        } catch (error) {
            console.error("Could not fetch books data, using default data:", error);
            // Fallback to defaultBooksData if fetch fails
            createBookshelf(defaultBooksData);
            bookshelf.innerHTML += `<p class="text-orange-600 text-center mt-4">Could not load 'books.json'. Displaying sample books instead. (This might happen when viewing locally without a server or if the file path is incorrect on GitHub Pages)</p>`;
        } finally {
            loadingSpinner.style.display = 'none'; // Hide spinner
            bookshelf.style.display = 'flex'; // Show bookshelf
        }
    }

    // Initialize the bookshelf by fetching data when the page loads
    window.onload = fetchBooksData;
</script>
